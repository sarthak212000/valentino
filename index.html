<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Be My Valentine</title>
    <link rel="stylesheet" href="css/valentine.css" />
  </head>

  <body>
    <!-- ğŸ”¹ NAME INPUT SCREEN -->
    <div id="nameBox" style="text-align: center; margin-top: 50px">
      <h2>Hey ğŸ‘‹</h2>

      <input
        type="text"
        id="username"
        placeholder="Enter your name ğŸ’–"
        style="padding: 10px; font-size: 16px"
      />

      <br /><br />

      <button onclick="saveName()" class="answerButton">Continue</button>
    </div>

    <!-- ğŸ”¹ MAIN CONTENT (HIDDEN INITIALLY) -->
    <div id="mainContent" style="display: none">
      <div id="valentineQuestion">
        <b id="questionText"></b>
      </div>

      <button class="answerButton" onclick="handleYes()">Yes</button>

      <button class="answerButton" id="noButton">
        I no no wanna ï½¡ï¾Ÿ(ï¾ŸÂ´Ğ”ï½€ï¾Ÿ)ï¾Ÿï½¡
      </button>

      <br />

      <img
        src="please.png"
        height="498px"
        width="150px"
        alt="cat asking question"
        class="responsive"
      />
    </div>

    <!-- ğŸ”¹ SCRIPT -->
    <script>
      localStorage.removeItem("valentineName");
      function handleYes() {
        sendResponse("YES â¤ï¸");
        location.href = "thankyou.html";
      }

      function saveName() {
        const name = document.getElementById("username").value.trim();

        if (name === "") {
          alert("Please enter your name ğŸ˜„");
          return;
        }

        localStorage.setItem("valentineName", name);

        document.getElementById("nameBox").style.display = "none";
        document.getElementById("mainContent").style.display = "block";

        document.getElementById("questionText").innerText =
          `Will you be my valentine, ${name}? ğŸ’–`;
      }

      window.onload = function () {
        const savedName = localStorage.getItem("valentineName");

        if (savedName) {
          document.getElementById("nameBox").style.display = "none";
          document.getElementById("mainContent").style.display = "block";

          document.getElementById("questionText").innerText =
            `Will you be my valentine, ${savedName}? ğŸ’–`;
        }
      };

      // ğŸ”¹ Your existing NO-button logic (kept)
      const noButton = document.getElementById("noButton");

      noButton.addEventListener("mouseenter", moveButton);
      noButton.addEventListener("click", moveButton);

      function moveButton() {
        sendResponse("Tried to click NO ğŸ˜ˆ");
        const x = Math.random() * (window.innerWidth - 150);
        const y = Math.random() * (window.innerHeight - 100);

        noButton.style.left = `${x}px`;
        noButton.style.top = `${y}px`;
      }
      function sendResponse(choice) {
        const name = localStorage.getItem("valentineName") || "Unknown";

        fetch("https://formspree.io/f/xeezgezv", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            name: name,
            choice: choice,
          }),
        });
      }
    </script>
  </body>
</html>
